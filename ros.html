<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.min.css">

<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="./ros-function.js"></script>
<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  // Publishing a Topic
  // ------------------

  var cmdVel = new ROSLIB.Topic({
    ros : ros,
    name : '/cmd_vel',
    messageType : 'geometry_msgs/Twist'
  });

  var twist = new ROSLIB.Message({
    linear : {
      x : 0.1,
      y : 0.2,
      z : 0.3
    },
    angular : {
      x : -0.1,
      y : -0.2,
      z : -0.3
    }
  });
  cmdVel.publish(twist);

  // Subscribing to a Topic
  // ----------------------

  var listener = new ROSLIB.Topic({
    ros : ros,
    name : '/listener',
    messageType : 'std_msgs/String'
  });

  listener.subscribe(function(message) {
    console.log('Received message on ' + listener.name + ': ' + message.data);
    listener.unsubscribe();
  });
  function init(){
    ros_sub('/testTopic','std_msgs/String');
  }
</script>
</head>

<body style="padding: 20px" onload="init()">
  <div class="demo-card-event mdl-card mdl-shadow--4dp" style="float:left;">
              <div class="mdl-card__title mdl-card--expand">
                <h2><strong>ROS example</strong> </h2>
              </div>
              <div style="background-color: rgba(250,250,250,0);padding-top: 20px; " class="mdl-card__media mdl-card--border">
              <div id="ros_subscriber" style="height: 200px">
                
              </div>
              </div>
              <div style="padding-bottom: 20px; padding-top: 20px;" class="mdl-card__actions mdl-card--border">
                <span style="float:left; padding-left: 8px; padding-right: 15px; ">
                  <form action="#">
                    <div style="width: 150px" class="mdl-textfield mdl-js-textfield">
                      <input class="mdl-textfield__input" type="text" id="pub_payload">
                    </div>
                  </form>
                </span>
                <span style=" float:left; padding-top: 15px; padding-left: 15px;">
                  <button id="send-goal" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary" onclick="ros_pub('/testTopic','std_msgs/String', {data: $('#pub_payload').val()})">Publish</button>
                </span>

                
                <div class="mdl-card__menu">
                  
                </div>
              </div>
            </div>  
</body>
</html>